<head></head>
    <link rel="stylesheet" href="style.css">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />
    <title>
        <%= locals.title %>
    </title>
    <link rel="stylesheet" href="/css/style.css">
    <script type="text/javascript" defer src="/js/script.js"></script>
    <script src="/js/jquery.js"></script>

    <script src="/js/tinymce/tinymce.min.js"></script>

</head>


<div class="container">
    <header class="header">

        <a href="index.html">
            <img src="logotipo.png" class="logo-header" />
        </a>
        <nav class="header__nav">
            <ul>
                <li>
                    <a href="/" class="">Home</a>
                </li>
                <li>
                    <a href="/about" class="">About</a>
                </li>
                <li>
                    <a href="/contact" class="">Contato</a>
                </li>
                
            </ul>
            <form action="/sair" method="POST">
                <input type="submit" value="meter o pé" class="btn-deslogar">  
          </form>
        </nav>
        
        

        <div class="header__button">
            <button class="searchButton" aria-expanded="false">
                Pesquisar
                <svg width="17" height="17" viewbox="0 0 17 17" fill="none" xmins="http://www.w3.org/2000/svg">
                    <path
                        d="M7.79167 13.4583C10.9213 13.4583 13.4583 10.9213 13.4583 7.79167C13.4583 4.66205 10.9213 2.125 7.79167 2.125C4.66205 2.125 2.125 4.66205 2.125 7.79167C2.125 10.9213 4.66205 13.4583 7.79167 13.4583Z"
                        stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    <path d="M14.875 14.875L11.7938 11.7938" stroke="black" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
            </button>
        </div>

    </header>
    <p style="text-align: center"><b>VERSÃO ALFA:</b> projeto não finalizado.</p>

    <div class="star-overlay"></div>
<style>
    body{
        background-position: 1400px 200px; /* 20px da esquerda e 50px do topo */
    }
    
    
    

    
</style>
<div class="star" style="top: 56%; left: 25%;"></div>
<div class="star" style="top: 24%; left: 68%;"></div>
<div class="star" style="top: 74%; left: 42%;"></div>
<div class="star" style="top: 16%; left: 20%;"></div>
<div class="star" style="top: 34%; left: 40%;"></div>
<div class="star" style="top: 11%; left: 60%;"></div>
<div class="star" style="top: 10%; left: 22%;"></div>
<div class="star" style="top: 10%; left: 95%;"></div>
<div class="star" style="top: 50%; left: 54%;"></div>
<div class="star" style="top: 15%; left: 90%;"></div>
<div class="star" style="top: 30%; left: 10%;"></div>
<div class="star" style="top: 80%; left: 10%;"></div>
<div class="star" style="top: 80%; left: 60%;"></div>
<div class="star" style="top: 12%; left: 34%;"></div>
<div class="star" style="top: 67%; left: 22%;"></div>
<div class="star" style="top: 58%; left: 75%;"></div>
<div class="star" style="top: 9%; left: 49%;"></div>
<div class="star" style="top: 45%; left: 37%;"></div>
<div class="star" style="top: 21%; left: 83%;"></div>
<div class="star" style="top: 4%; left: 12%;"></div>
<div class="star" style="top: 33%; left: 88%;"></div>
<div class="star" style="top: 78%; left: 56%;"></div>
<div class="star" style="top: 25%; left: 92%;"></div>
<div class="star" style="top: 68%; left: 8%;"></div>
<div class="star" style="top: 77%; left: 39%;"></div>
<div class="star" style="top: 83%; left: 69%;"></div>

    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

    <div class="author">
        <h3>
          
        </h3>
        <p class="usuario-index"> (Usuario)</p>
        <h1 class="author__heading">CONNECTIONS: SPARKS</h1>
        <p class="author__body">Faça parte da nossa galáxia! Crie um perfil:</p>
        <a href="/criar" class="btn">Criar Novo Perfil</a>
        <a href="/novogrupo" class="btn"> NOVA CONSTELAÇÃO</a>
        
        
    </div>


    <section class="articles">
        <h2 class="articles__heading" style="text-align: center;">Últimas Publicações:</h2>

        <div class="publications">
                <div class="boxPublicacoes">
                    <a href="/publicacao/<%= publicacao._id %>">
                        Título da Publicação<a> <i class="material-symbols-outlined" style="font-size: 1rem;">
                                    north_east</i> <br>
                                <b><i>Por:</b>
                                Nome do Autor </i> <br>
                                    <p class="textoBox">
                                        Texto da Publicação
                                    </p>
                </div>
                
        </div>

        
        <section style="display: flex; flex-direction: column; align-items: center;">
            <div style="display: flex; gap: 10px;">
               
                
            </div>
            <input type="submit" value="Perfis" class="btn-perfil" onclick="toggleInfo('info-perfis')">
            <input type="submit" value="Grupos" class="btn-grupos" onclick="toggleInfo('info-grupos')">
            <input type="submit" value="Postagens" class="btn-postagens" onclick="toggleInfo('info-postagens')">
            <!-- Seção de Perfis -->
            <div id="info-perfis" style="display: none; margin-top: 20px;">
                <ul class="article-ul">
                    <li>
                        <a href="post.html">
                            <img src='user.png' class="foto-perfil">
                            <span class="article-list__name">Nome do Usuário</span>
                            <span class="article-list__date">
                                Criado em: 23/11/2007
                                <p>Curtidas: X</p>
                            </span>
                        </a>
                    </li>
                </ul>
                <a href="/?page=<%= nextPage %>" class="pagination">&lt; Ver perfis anteriores</a>
            </div>
        
            
        </section>
        <!-- Seção de Grupos -->
        <div id="info-grupos" style="display: none; margin-top: 20px;">
            <h1>CONSTELAÇÕES:</h1>
            <ul>
                <% grupos.forEach(grupo => { %>
                    <li>
                        <dt>
                            <a href='/grupo/<%= grupo._id %>'><b>nome do grupo</b></a>
                        </dt>
                        <dd>descrição do grupo</dd>
                    </li>
                <% }) %>
            </ul>
        </div>

        <div id="info-postagens" style="display: none; margin-top: 20px;">
           
    <h3>POSTS:</h3>
    <ul class="publicação-ul">
        <div style="display: flex;">
            <img src="<%= comentario.imagem %>" class="foto-perfil">
            <div style="flex: 1; padding-left: 20px;">

                <font color="yellow"> &starf; </font>
                <b> <%= comentario.assinatura %> </b>
        
                            <div style="resize:none; padding-bottom: 10%; position: relative;">
                                <%= comentario.texto %> 
                            </div>
                            <button class="btn-comentar-index" onclick="toggleCommentBox('<%= comentario._id %>')">COMENTAR</button>
                    </div>

                <div style="resize:none; padding-bottom: 10%;">
                    
                    
                    CURTIDAS: <%= comentario.likes.length %>
                    <% if (!comentario.likes.includes(idCookie)) { %>
                        <div>
                            <form action="/curtir-comentario/<%= comentario._id %>?_method=POST" method="POST"></form>
                                <button class="btn-curtir-index">CURTIR</button>
                            </form>
                        </div>
                        
                    <% } %>
        </div>
        <div id="comment-box-index<%= comentario._id %>" style="display: none; margin-top: 10px;">
            <form action="/comentar-post/<%= comentario._id %>" method="POST">
                <textarea id="texto<%= comentario._id %>" name="comentario" rows="3" maxlength="250" placeholder="Escreva seu comentário" oninput="atualizarContador('<%= comentario._id %>')"></textarea>
                <p id="contador<%= comentario._id %>" class="contador-caracteres">Caracteres restantes: 250/250</p>
                <input type="submit" value="Enviar" class="btn-enviar-comentario">
            </form>
        </div>
        
    </ul>

</div> <br>
<script>
    function atualizarContador() { //contador de letras dos comentários!
        var input = document.getElementById('texto');
        var contador = document.getElementById('contador');
        var caracteresRestantes = 250 - input.value.length;
        contador.textContent = "Caracteres restantes: " + caracteresRestantes + "/250";
    };

    function atualizarCurtidas() {
        var numero = document.getElementById('numeroCurtidas');

        numero.textContent = numero + 1;
    }

</script>
        </div>
        <!-- JavaScript -->
        <script>
            // Função original para alternar a visibilidade
            function toggleInfo(id) {
                // Oculta todas as seções primeiro
                document.getElementById('info-perfis').style.display = 'none';
                document.getElementById('info-grupos').style.display = 'none';
                document.getElementById('info-postagens').style.display = 'none';
        
                // Exibe a seção correspondente ao botão clicado
                var info = document.getElementById(id);
                if (info.style.display === "none") {
                    info.style.display = "block";
                } else {
                    info.style.display = "none";
                }
            }
        
            // Função extra que pode ser usada ou integrada ao antigo script para outros comportamentos
            function mostrarSecao(secaoId) {
                // Oculta todas as seções
                document.getElementById('info-perfis').style.display = 'none';
                document.getElementById('info-grupos').style.display = 'none';
                document.getElementById('info-postagens').style.display = 'none';
        
                // Exibe a seção selecionada
                document.getElementById(secaoId).style.display = 'block';
            }
            function toggleCommentBox(id) {
    var commentBox = document.getElementById('comment-box-index' + id);
    if (commentBox.style.display === "none" || commentBox.style.display === "") {
        commentBox.style.display = "block";
    } else {
        commentBox.style.display = "none";
    }
}
function atualizarContador(id) {
    var input = document.getElementById('texto' + id);
    var contador = document.getElementById('contador' + id);
    var caracteresRestantes = 250 - input.value.length;
    contador.textContent = "Caracteres restantes: " + caracteresRestantes + "/250";
}

        </script>
        
        <style>
           
            #info-perfis, #info-grupos {
                width: 100%; /* Garantir que a largura seja adequada */
            }
        </style>

</div>
